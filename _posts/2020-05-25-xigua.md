---
layout: post
title:  "一个研发工程师在短视频领域做了什么（一）技术简介"
categories: 
---
想要用之后一系列文章，总结一下我过去一段时间所做的事情，和对所在领域的认识，希望可以给朋友们提供有用的信息，也希望纠正和完善自己相关的知识和认知。

我过去一段时间作为软件工程师，负责为一款国内垂直领域top3的视频应用开发后台服务，服务支持多个平台的应用，主打方向短视频内容。截至离职，服务支撑5000w左右的日活跃用户，上亿的的月活跃用户。与市面上很多产品一样，这款产品的商业模型是向用户提供高质量的内容，活得流量后通过在部分流量中添加广告，向广告主收取费用。打造这样一款产品，需要研发工程师，运营，产品，设计师，销售等一系列角色共同配合。在这样一个团队中，研发工程师作为项目的最终“施工方”承担着交付最终产品的重要任务，其所需要具备的无论是技术能力和非技术能力都是项目能否顺利进行的关键。

## 需要哪些工程师
诚然不同规模的产品，分工的粒度是不同的。作为一套完整的跨平台的流媒体服务，这样一项复杂工程，基本可以把工程师分为：
* **移动端工程师**：移动端是目前最主要的流量平台。APP通常需要适配目前最大的android和ios系统，由于两者有不同的技术栈，通常分属不同的团队，当然现在产生了flutter这种融合技术，未来也会有融合的可能性。除了手机端，智能电视也需要有单独的App适配。
* **web端工程师**：web端指的是浏览器端，是PC上比较常用的客户端，手机浏览器也是移动端的重要补充。实际上，移动端的App中也会嵌入不上的浏览器页面使得功能更加灵活。而在国内，微信作为国内大一统的流量平台，小程序的适配通常也是有web端工程师完成。
* **算法工程师**：如何能够把海量的内容（不仅限于视频内容）精准地分发给需要这些内容的用户，提高产品收益的各项指标，是算法工程师直接解决的问题。他们通常利用统计、机器学习方法，通过优化模型和参数等方式提升相关的产品的相关指标。
* **后端工程师**：除去用户交互相关的功能，产品业务逻辑流程的实现，相关数据的计算、分析以及存储都是后端工程师需要在服务器上实现的功能。后端工程师的工作通常也是其他工程是的枢纽，承接移动端或者web端的用户请求，提供算法所需要的数据。

至于这里没有提到的，全栈工程师，通常需要掌握上述所有工种的技能，独立快速打造产品。而实际上web端工程师的技术栈可能是最方便达到这个效果的。但正如经济学中社会分工所带来效率提升，随着系统的规模扩大，复杂程度更高，工程师的分工可以更加熟练地使用专门的工具进行开发能够提高效率。因此，不同规模下，工程师的分工选择也是工程效率的关键

## 工程师做了什么
一个视频产品一般需要三大部分的工作：客户端，服务器端，CDN和多媒体（广义上也属于服务器端的一部分）。
### 1. 客户端
用户所有能感知到的视觉，交互等功能，都是客户端的工作，随着用户设备的不断丰富，也需要这些功能在不同设备和平台上保持一致。这些程序会完成与用户交互相关的计算和优化，通过网络与服务器端和CDN进行通信向服务器发起请求，以获取需要的视频和其他的数据。客户端的开发通常需要与设计师和产品经理紧密联系，更好地满足用户对于美感，可用性，易用性的要求。
### 2. 服务器端
服务器端完成了用户发出指令后的大部分工作，这些工作用户是没有感知的。这里开发的所有的软件和程序，以及各种各样的算法推荐模型都运行在数据中心的服务器上，无数的服务器每天不间断的运行保证用户随时随地能够获取服务。而现在流行的“云”的概念，实际上就是在解决如何利用已有的资源提高服务器端的开发部署的效率的问题。
### 3. CDN和多媒体
严格意义上，CDN是某种形式的服务器，其有专门的应用场景。产品中的获取图片和视频等静态资源通常有低延迟的要求。CDN作为专门解决这类问题的基础设施，帮助终端用户在观看视频、图片时有更好的体验。同时，一般产品也涉及到一系列针对图片、视频等类型资源的后续处理，例如增加水印，修改格式，改变清晰度等，这些都涉及到专门的研发工作。

## 核心价值
如之前所说，研发工程师作为团队中的重要角色，为打造一款成功的用户产品，提供的核心价值主要体现在两个方面：
### 1. 高效完成产品交付
研发工程师能够提高产品交付效率，进行更多交付就有更多的机会满足用户的需求，从而吸引更多的用户最终提高变现效果，获得利润。作为以手机端为主的平台，产品交付就是把新版本的APP发布到手机市场上，android包括各大厂商在内的各种应用商店，ios是App Store，这个过程涉及到很多外部审核环节，最终交付用户一个新产品（功能）的时间不是完全可控的。通常，我们会以一周或两周为一个周期完成从开发、测试到发布的所有工作。对于工程师来讲，在这个过程中，首先需要充分的理解产品的业务逻辑，这是保证你交付的产品符合用户需求的第一步，这个过程往往需要和产品经理、设计师进行充分的沟通来做到这一点。接下来，需要设计技术方案，这个过程考验的是研发工程师对底层基础设施的理解，选用什么样的基础设施和工具完成产品的开发，无论是对交付时间和之后的运维工作都有着至关重要的影响。同时，这个过程需要和其他工程师充分沟通，厘清各自的职责，完成之后交付部署上的配合工作。最后就是机械性的编码工作，这部分工作实际上依赖于前期的计划的顺利与否，如果顺利的话实际上不需要耗费很多时间精力。但是顺利这个前提往往不一定成立，所以各个阶段所有可能出现的风险都需要管理，而在技术环节工程师发现项目风险的能力是无法替代的。

### 2. 建立稳定可靠的系统
产品通常是7*24小时在线上运转，每时每刻都在进行着商业变现。一旦在某个时间的交付的产品不可用，那么自然会损失这段时间的收入。因此，研发工程师交付产品的质量，可以直接换算成收入，自然，工程师的价值也体现于此。而建立一个稳定可靠的系统影响因素有很多，越复杂的系统影响因素越多，对技术的要求也就越高。这对技术的要求是全方位的，前期的系统设计能力，开发过程的编码能力，后期的系统维护能力，问题修复能力都会影响到系统的稳定和可靠性。
* **系统设计**：用户产品的特点就是应对高并发的场景。主要是对分布式计算和分布式存储有较好的要求，针对不同基础设施需要对流量、延迟、资源消耗等关键参数有足够的认识，从而完成技术选型。
* **编码**：这里主要考验的是对算法、数据结构和设计模式的运用，以完成业务逻辑的抽象和实现，保证稳定性、效率和可扩展性。
* **系统维护**：用户产品通常是工程师会担任DevOps角色，即同样需要维护自己交付的系统。这要求其对部署环境有一定的了解，主要涵盖操作系统和网络的知识。
* **问题修复**：这是复杂和综合的场景，只有对上述三点有充分的准备，才能做好最后一点。因而，这种处理危机的能力也是最难获取，和最具价值的。

## 总结
可以看出，作为一款用户产品的研发工程师，需要涵盖对各个方面技术知识和业务知识的了解。而且除了对核心技术能力的要求之外，沟通能力和项目管理能力也是衡量优秀与否的重要标准。当然这仅仅是作为工程师这个角色的核心价值，这些价值是团队中的其他角色无法替代的。而需要明确的是，研发工程师的最终目标是帮助团队打造一款优秀的商业产品，围绕这个最终目标，研发工程师的价值可以是全方面的。如果依托足够的技术知识能够不设边界的为团队提供多维度的帮助，那么工程师才能和项目一起共同成长收获更大的价值。


